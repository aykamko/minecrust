(()=>{var t,e,i,n,o,r,s={694:t=>{window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,o=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)},r=function(t){return t*(Math.PI/180)},s=new Map,a=function(t){s.has(t)&&clearTimeout(s.get(t)),s.set(t,setTimeout(t,100))},d=function(t,e,i){for(var n,o=e.split(/[ ,]+/g),r=0;r<o.length;r+=1)n=o[r],t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent&&t.attachEvent(n,i)},c=function(t,e,i){for(var n,o=e.split(/[ ,]+/g),r=0;r<o.length;r+=1)n=o[r],t.removeEventListener?t.removeEventListener(n,i):t.detachEvent&&t.detachEvent(n,i)},l=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},p=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},u=function(t,e){e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},h=function(t,e,i){var n=f(t);for(var o in n)if(n.hasOwnProperty(o))if("string"==typeof e)n[o]=e+" "+i;else{for(var r="",s=0,a=e.length;s<a;s+=1)r+=e[s]+" "+i+", ";n[o]=r.slice(0,-2)}return n},f=function(t){var e={};return e[t]="",["webkit","Moz","o"].forEach((function(i){e[i+t.charAt(0).toUpperCase()+t.slice(1)]=""})),e},m=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},y=function(t,e){if(t.length)for(var i=0,n=t.length;i<n;i+=1)e(t[i]);else e(t)},v=!!("ontouchstart"in window),g=!!window.PointerEvent,b=!!window.MSPointerEvent,w={start:"mousedown",move:"mousemove",end:"mouseup"},x={};function _(){}g?n={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:b?n={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:v?(n={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},x=w):n=w,_.prototype.on=function(t,e){var i,n=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],this._handlers_[i]=this._handlers_[i]||[],this._handlers_[i].push(e);return this},_.prototype.off=function(t,e){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===e?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(e)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(e),1),this},_.prototype.trigger=function(t,e){var i,n=this,o=t.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var r=0;r<o.length;r+=1)i=o[r],n._handlers_[i]&&n._handlers_[i].length&&n._handlers_[i].forEach((function(t){t.call(n,{type:i,target:n},e)}))},_.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)?i[n]=e[n]:t.hasOwnProperty(n)&&(i[n]=t[n]);return i}(this.options,t))},_.prototype.bindEvt=function(t,e){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[e]=function(){"function"==typeof i["on"+e]?i["on"+e].apply(i,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},d(t,n[e],i._domHandlers_[e]),x[e]&&d(t,x[e],i._domHandlers_[e]),i},_.prototype.unbindEvt=function(t,e){return this._domHandlers_=this._domHandlers_||{},c(t,n[e],this._domHandlers_[e]),x[e]&&c(t,x[e],this._domHandlers_[e]),delete this._domHandlers_[e],this};var O=_;function E(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=E.id,E.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}E.prototype=new O,E.constructor=E,E.id=0,E.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},E.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=function(t,e){var i=f("borderRadius");for(var n in i)i.hasOwnProperty(n)&&(i[n]="50%");return i}(),i=h("transition","opacity",t),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},m(n.el,i),"circle"===this.options.shape&&m(n.back,e),m(n.front,e),this.applyStyles(n),this},E.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var i in t[e])this.ui[e].style[i]=t[e][i];return this},E.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},E.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},E.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},E.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout((function(){e.ui.el.style.opacity=1}),0),e.showTimeout=setTimeout((function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)}),e.options.fadeTime)),e},E.prototype.hide=function(t){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout((function(){var i="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=i,"function"==typeof t&&t.call(e),e.trigger("hidden",e.instance)}),e.options.fadeTime),e.options.restJoystick){var i=e.options.restJoystick,n={};n.x=!0===i||!1!==i.x?0:e.instance.frontPosition.x,n.y=!0===i||!1!==i.y?0:e.instance.frontPosition.y,e.setPosition(t,n)}return e},E.prototype.setPosition=function(t,e){var i=this;i.frontPosition={x:e.x,y:e.y};var n=i.options.fadeTime+"ms",o={};o.front=h("transition",["transform"],n);var r={front:{}};r.front={transform:"translate("+i.frontPosition.x+"px,"+i.frontPosition.y+"px)"},i.applyStyles(o),i.applyStyles(r),i.restTimeout=setTimeout((function(){"function"==typeof t&&t.call(i),i.restCallback()}),i.options.fadeTime)},E.prototype.restCallback=function(){var t={};t.front=h("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},E.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},E.prototype.computeDirection=function(t){var e,i,n,o=t.angle.radian,r=Math.PI/4,s=Math.PI/2;if(o>r&&o<3*r&&!t.lockX?e="up":o>-r&&o<=r&&!t.lockY?e="left":o>3*-r&&o<=-r&&!t.lockX?e="down":t.lockY||(e="right"),t.lockY||(i=o>-s&&o<s?"left":"right"),t.lockX||(n=o>0?"up":"down"),t.force>this.options.threshold){var a,d={};for(a in this.direction)this.direction.hasOwnProperty(a)&&(d[a]=this.direction[a]);var c={};for(a in this.direction={x:i,y:n,angle:e},t.direction=this.direction,d)d[a]===this.direction[a]&&(c[a]=!0);if(c.x&&c.y&&c.angle)return t;c.x&&c.y||this.trigger("plain",t),c.x||this.trigger("plain:"+i,t),c.y||this.trigger("plain:"+n,t),c.angle||this.trigger("dir dir:"+e,t)}else this.resetDirection();return t};var k=E;function T(t,e){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=T.id,T.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},this.config(e),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var i=getComputedStyle(this.options.zone.parentElement);return i&&"flex"===i.display&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}T.prototype=new O,T.constructor=T,T.id=0,T.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(e){if(void 0===e)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===e)return t[i];return!1}},T.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},T.prototype.begin=function(){var t=this.options;if("static"===t.mode){var e=this.createNipple(t.position,this.manager.getIdentifier());e.add(),this.idles.push(e)}},T.prototype.createNipple=function(t,e){var i=this.manager.scroll,n={},o=this.options,r=this.parentIsFlex?i.x:i.x+this.box.left,s=this.parentIsFlex?i.y:i.y+this.box.top;if(t.x&&t.y)n={x:t.x-r,y:t.y-s};else if(t.top||t.right||t.bottom||t.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=t.top,a.style.right=t.right,a.style.bottom=t.bottom,a.style.left=t.left,a.style.position="absolute",o.zone.appendChild(a);var d=a.getBoundingClientRect();o.zone.removeChild(a),n=t,t={x:d.left+i.x,y:d.top+i.y}}var c=new k(this,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:e,position:t,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(u(c.ui.el,n),u(c.ui.front,c.frontPosition)),this.nipples.push(c),this.trigger("added "+c.identifier+":added",c),this.manager.trigger("added "+c.identifier+":added",c),this.bindNipple(c),c},T.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},T.prototype.bindNipple=function(t){var e,i=this,n=function(t,n){e=t.type+" "+n.id+":"+t.type,i.trigger(e,n)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",n),t.on("dir:up dir:right dir:down dir:left",n),t.on("plain:up plain:right plain:down plain:left",n)},T.prototype.pressureFn=function(t,e,i){var n=this,o=0;clearInterval(n.pressureIntervals[i]),n.pressureIntervals[i]=setInterval(function(){var i=t.force||t.pressure||t.webkitForce||0;i!==o&&(e.trigger("pressure",i),n.trigger("pressure "+e.identifier+":pressure",i),o=i)}.bind(n),100)},T.prototype.onstart=function(t){var e=this,i=e.options,n=t;return t=l(t),e.updateBox(),y(t,(function(o){e.actives.length<i.maxNumberOfNipples?e.processOnStart(o):n.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach((function(i){if(Object.values(n.touches).findIndex((function(t){return t.identifier===i}))<0){var o=[t[0]];o.identifier=i,e.processOnEnd(o)}})),e.actives.length<i.maxNumberOfNipples&&e.processOnStart(o))})),e.manager.bindDocument(),!1},T.prototype.processOnStart=function(t){var e,i=this,n=i.options,r=i.manager.getIdentifier(t),s=t.force||t.pressure||t.webkitForce||0,a={x:t.pageX,y:t.pageY},d=i.getOrCreate(r,a);d.identifier!==r&&i.manager.removeIdentifier(d.identifier),d.identifier=r;var c=function(e){e.trigger("start",e),i.trigger("start "+e.id+":start",e),e.show(),s>0&&i.pressureFn(t,e,e.identifier),i.processOnMove(t)};if((e=i.idles.indexOf(d))>=0&&i.idles.splice(e,1),i.actives.push(d),i.ids.push(d.identifier),"semi"!==n.mode)c(d);else{if(!(o(a,d.position)<=n.catchDistance))return d.destroy(),void i.processOnStart(t);c(d)}return d},T.prototype.getOrCreate=function(t,e){var i,n=this.options;return/(semi|static)/.test(n.mode)?(i=this.idles[0])?(this.idles.splice(0,1),i):"semi"===n.mode?this.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1):i=this.createNipple(e,t)},T.prototype.processOnMove=function(t){var e=this.options,i=this.manager.getIdentifier(t),n=this.nipples.get(i),s=this.manager.scroll;if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!n)return console.error("Found zombie joystick with ID "+i),void this.manager.removeIdentifier(i);if(e.dynamicPage){var a=n.el.getBoundingClientRect();n.position={x:s.x+a.left,y:s.y+a.top}}n.identifier=i;var d=n.options.size/2,c={x:t.pageX,y:t.pageY};e.lockX&&(c.y=n.position.y),e.lockY&&(c.x=n.position.x);var l,p,u,h,f,m,y,v,g,b,w=o(c,n.position),x=(l=c,u=(p=n.position).x-l.x,h=p.y-l.y,function(t){return t*(180/Math.PI)}(Math.atan2(h,u))),_=r(x),O=w/d,E={distance:w,position:c};if("circle"===n.options.shape?(f=Math.min(w,d),y=n.position,v=f,b={x:0,y:0},g=r(g=x),b.x=y.x-v*Math.cos(g),b.y=y.y-v*Math.sin(g),m=b):(m=function(t,e,i){return{x:Math.min(Math.max(t.x,e.x-i),e.x+i),y:Math.min(Math.max(t.y,e.y-i),e.y+i)}}(c,n.position,d),f=o(m,n.position)),e.follow){if(w>d){var k=c.x-m.x,T=c.y-m.y;n.position.x+=k,n.position.y+=T,n.el.style.top=n.position.y-(this.box.top+s.y)+"px",n.el.style.left=n.position.x-(this.box.left+s.x)+"px",w=o(c,n.position)}}else c=m,w=f;var P=c.x-n.position.x,I=c.y-n.position.y;n.frontPosition={x:P,y:I},e.dataOnly||(n.ui.front.style.transform="translate("+P+"px,"+I+"px)");var S={identifier:n.identifier,position:c,force:O,pressure:t.force||t.pressure||t.webkitForce||0,distance:w,angle:{radian:_,degree:x},vector:{x:P/d,y:-I/d},raw:E,instance:n,lockX:e.lockX,lockY:e.lockY};(S=n.computeDirection(S)).angle={radian:r(180-x),degree:180-x},n.trigger("move",S),this.trigger("move "+n.id+":move",S)}else this.processOnEnd(t)},T.prototype.processOnEnd=function(t){var e=this,i=e.options,n=e.manager.getIdentifier(t),o=e.nipples.get(n),r=e.manager.removeIdentifier(o.identifier);o&&(i.dataOnly||o.hide((function(){"dynamic"===i.mode&&(o.trigger("removed",o),e.trigger("removed "+o.id+":removed",o),e.manager.trigger("removed "+o.id+":removed",o),o.destroy())})),clearInterval(e.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),e.trigger("end "+o.id+":end",o),e.ids.indexOf(o.identifier)>=0&&e.ids.splice(e.ids.indexOf(o.identifier),1),e.actives.indexOf(o)>=0&&e.actives.splice(e.actives.indexOf(o),1),/(semi|static)/.test(i.mode)?e.idles.push(o):e.nipples.indexOf(o)>=0&&e.nipples.splice(e.nipples.indexOf(o),1),e.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(e.manager.ids[r.id]=r.identifier))},T.prototype.onDestroyed=function(t,e){this.nipples.indexOf(e)>=0&&this.nipples.splice(this.nipples.indexOf(e),1),this.actives.indexOf(e)>=0&&this.actives.splice(this.actives.indexOf(e),1),this.idles.indexOf(e)>=0&&this.idles.splice(this.idles.indexOf(e),1),this.ids.indexOf(e.identifier)>=0&&this.ids.splice(this.ids.indexOf(e.identifier),1),this.manager.removeIdentifier(e.identifier),this.manager.unbindDocument()},T.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach((function(t){t.destroy()})),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var P=T;function I(t){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=p(),e.config(t),e.prepareCollections();var i=function(){var t;e.collections.forEach((function(i){i.forEach((function(i){t=i.el.getBoundingClientRect(),i.position={x:e.scroll.x+t.left,y:e.scroll.y+t.top}}))}))};d(window,"resize",(function(){a(i)}));var n=function(){e.scroll=p()};return d(window,"scroll",(function(){a(n)})),e.collections}I.prototype=new O,I.constructor=I,I.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var i;return t.collections.every((function(t){return!(i=t.get(e))})),i}},I.prototype.create=function(t){return this.createCollection(t)},I.prototype.createCollection=function(t){var e=new P(this,t);return this.bindCollection(e),this.collections.push(e),e},I.prototype.bindCollection=function(t){var e,i=this,n=function(t,n){e=t.type+" "+n.id+":"+t.type,i.trigger(e,n)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",n),t.on("dir:up dir:right dir:down dir:left",n),t.on("plain:up plain:right plain:down plain:left",n)},I.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},I.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},I.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},I.prototype.removeIdentifier=function(t){var e={};for(var i in this.ids)if(this.ids[i]===t){e.id=i,e.identifier=this.ids[i],delete this.ids[i];break}return e},I.prototype.onmove=function(t){return this.onAny("move",t),!1},I.prototype.onend=function(t){return this.onAny("end",t),!1},I.prototype.oncancel=function(t){return this.onAny("end",t),!1},I.prototype.onAny=function(t,e){var i,n=this,o="processOn"+t.charAt(0).toUpperCase()+t.slice(1);e=l(e);var r=function(t,e,i){i.ids.indexOf(e)>=0&&(i[o](t),t._found_=!0)};return y(e,(function(t){i=n.getIdentifier(t),y(n.collections,r.bind(null,t,i)),t._found_||n.removeIdentifier(i)})),!1},I.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach((function(t){t.destroy()})),this.off()},I.prototype.onDestroyed=function(t,e){if(this.collections.indexOf(e)<0)return!1;this.collections.splice(this.collections.indexOf(e),1)};var S=new I;e.default={create:function(t){return S.create(t)},factory:S}}]).default}},a={};function d(t){var e=a[t];if(void 0!==e)return e.exports;var i=a[t]={id:t,loaded:!1,exports:{}};return s[t](i,i.exports,d),i.loaded=!0,i.exports}d.m=s,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},d.a=(o,r,s)=>{var a;s&&((a=[]).d=-1);var d,c,l,p=new Set,u=o.exports,h=new Promise(((t,e)=>{l=e,c=t}));h[e]=u,h[t]=t=>(a&&t(a),p.forEach(t),h.catch((t=>{}))),o.exports=h,r((o=>{var r;d=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var r=[];r.d=0,o.then((t=>{s[e]=t,n(r)}),(t=>{s[i]=t,n(r)}));var s={};return s[t]=t=>t(r),s}}var a={};return a[t]=t=>{},a[e]=o,a})))(o);var s=()=>d.map((t=>{if(t[i])throw t[i];return t[e]})),c=new Promise((e=>{(r=()=>e(s)).r=0;var i=t=>t!==a&&!p.has(t)&&(p.add(t),t&&!t.d&&(r.r++,t.push(r)));d.map((e=>e[t](i)))}));return r.r?c:s()}),(t=>(t?l(h[i]=t):c(u),n(a)))),a&&a.d<0&&(a.d=0)},d.d=(t,e)=>{for(var i in e)d.o(e,i)&&!d.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},d.f={},d.e=t=>Promise.all(Object.keys(d.f).reduce(((e,i)=>(d.f[i](t,e),e)),[])),d.u=t=>t+".js",d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),d.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),d.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o={},r="rust-webpack-template:",d.l=(t,e,i,n)=>{if(o[t])o[t].push(e);else{var s,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var p=c[l];if(p.getAttribute("src")==t||p.getAttribute("data-webpack")==r+i){s=p;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,d.nc&&s.setAttribute("nonce",d.nc),s.setAttribute("data-webpack",r+i),s.src=t),o[t]=[e];var u=(e,i)=>{s.onerror=s.onload=null,clearTimeout(h);var n=o[t];if(delete o[t],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((t=>t(i))),e)return e(i)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),a&&document.head.appendChild(s)}},d.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.v=(t,e,i,n)=>{var o=fetch(d.p+""+i+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,n).then((e=>Object.assign(t,e.instance.exports))):o.then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,n))).then((e=>Object.assign(t,e.instance.exports)))},(()=>{var t;d.g.importScripts&&(t=d.g.location+"");var e=d.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&!t;)t=i[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),d.p=t})(),(()=>{var t={826:0};d.f.j=(e,i)=>{var n=d.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,o)=>n=t[e]=[i,o]));i.push(n[2]=o);var r=d.p+d.u(e),s=new Error;d.l(r,(i=>{if(d.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",s.name="ChunkLoadError",s.type=o,s.request=r,n[1](s)}}),"chunk-"+e,e)}};var e=(e,i)=>{var n,o,[r,s,a]=i,c=0;if(r.some((e=>0!==t[e]))){for(n in s)d.o(s,n)&&(d.m[n]=s[n]);a&&a(d)}for(e&&e(i);c<r.length;c++)o=r[c],d.o(t,o)&&t[o]&&t[o][0](),t[o]=0},i=self.webpackChunkrust_webpack_template=self.webpackChunkrust_webpack_template||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";d.p;var t=d(694),e=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{d(n.next(t))}catch(t){r(t)}}function a(t){try{d(n.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}d((n=n.apply(t,e||[])).next())}))};document.addEventListener("gesturestart",(t=>t.preventDefault()));const i=navigator.userAgent.indexOf("Chrome")>-1,n=navigator.userAgent.indexOf("Safari")>-1&&!i;function o(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}document.addEventListener("contextmenu",(t=>{t.preventDefault()}));let r=null;document.addEventListener("DOMContentLoaded",(()=>e(void 0,void 0,void 0,(function*(){var t;null===(t=window.feather)||void 0===t||t.replace();const e=document.getElementById("controls-info-popup"),i=document.getElementById("wasm-container");if(o())i.style.pointerEvents="none",e.style.display="none";else{document.getElementsByClassName("button-container")[0].style.display="none";const t=document.getElementsByClassName("joystick");for(const e of t)e.style.visibility="hidden"}r=yield("./minecruft_atlas.png",new Promise(((t,e)=>{const i=new Image;i.onload=()=>t(i),i.onerror=e,i.src="./minecruft_atlas.png"})))})))),window.handlePlaceBlockTypeChanged=t=>{if(!r)return;let e={Dirt:[2,0],Stone:[2,3],Sand:[0,1],OakPlank:[2,4],Glass:[2,1]};if(t in e){let i=e[t],n=function(t,e,i,n,o){const r=document.createElement("canvas");r.width=16,r.height=16;const s=r.getContext("2d");if(!s)throw new Error("Unable to get canvas context");return s.drawImage(t,e,i,16,16,0,0,16,16),r}(r,16*i[0],16*i[1]);n.id="block-preview-canvas",document.getElementById("block-preview-canvas").replaceWith(n)}},window.updateGameStateLoadProgress=t=>{document.getElementById("progress-inner").style.width=100*Math.max(t,.1)+"%",console.log("Load progress",100*t)},window.handleGameReady=t=>{document.getElementById("load-progress").remove(),document.getElementById("wasm-container").style.opacity="100";const e=()=>{const t=document.getElementById("portrait-orientation-warning");screen.orientation.type.includes("portrait")?t.style.display="flex":t.style.display="none"};window.addEventListener("orientationchange",e),e()};const s=500;let a=0;function c(t){if(t.touches.length>1)return;const e=(new Date).getTime(),i=e-a;1===t.touches.length&&i<s&&(t.preventDefault(),t.target.click()),a=e}let l=null,p=null;function u(e){o()&&(clearTimeout(void 0),l&&l.destroy(),p&&p.destroy(),setTimeout((()=>{const i=document.getElementById("pitch-yaw-joystick");l=t.create({zone:i,color:"transparent"});let n=0,o=0;l.on("move",(function(t,i){(new Date).getTime()-n<100||(console.log("Pitch/Yaw: ",i.vector),e.pitch_yaw_joystick_moved(i.vector.x,-i.vector.y))})),l.on("start",(function(t,e){n=(new Date).getTime()})),l.on("end",(function(t,i){(new Date).getTime()-n<100?(o+=1,e.y_button_pressed(),setTimeout((()=>e.y_button_released()),20)):e.pitch_yaw_joystick_released()})),i.addEventListener("touchstart",(t=>c(t)));const r=document.getElementById("translation-joystick");p=t.create({zone:r,color:"transparent"}),p.on("move",(function(t,i){e.translation_joystick_moved(i.vector.x,i.vector.y)})),p.on("end",(function(t,i){e.translation_joystick_released()})),r.addEventListener("touchstart",(t=>c(t)))}),400))}d.e(235).then(d.bind(d,235)).then((t=>{console.log("WASM Loaded"),function(t){const e=document.getElementById("a-button"),i=document.getElementById("b-button"),n=(document.getElementById("y-button"),document.getElementById("block-preview")),r=o()?"touchstart":"mousedown";e.addEventListener(r,(()=>{t.a_button_pressed()})),i.addEventListener(r,(()=>{t.b_button_pressed()})),n.addEventListener(r,(()=>{t.block_preview_pressed()}));for(const o of["touchend","touchcancel","mouseup","mouseleave"])e.addEventListener(o,(()=>{t.a_button_released()})),i.addEventListener(o,(()=>{t.b_button_released()})),n.addEventListener(o,(()=>{t.block_preview_released()}))}(t),u(t);const i=document.getElementById("controls-info-popup");document.addEventListener("pointerlockchange",(()=>{document.pointerLockElement?o()||(i.style.display="none"):(t.web_pointer_lock_lost(),o()||(i.style.display="block"))}),!1);const r=i=>{n&&i.addEventListener("click",(()=>e(void 0,void 0,void 0,(function*(){document.pointerLockElement!==i&&i.requestPointerLock()})))),u(t)},s=document.getElementById("wasm-container");let a;new MutationObserver(((t,e)=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"CANVAS"===t.nodeName&&"wasm-canvas"===t.id&&(r(t),e.disconnect())})).observe(s,{childList:!0,subtree:!0}),window.addEventListener("resize",(()=>{clearTimeout(a),a=setTimeout((()=>{const e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;t.web_window_resized(e,i),u(t)}),400)}));const d=document.documentElement.clientWidth,c=document.documentElement.clientHeight;document.getElementById("wasm-container").style.opacity="0",t.run(d,c)}))})()})();